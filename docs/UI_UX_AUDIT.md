# TeamCompass Android UI/UX Audit (Material 3)

> Основание: аудит выполнен по исходному коду Jetpack Compose и README (без APK/видео/метрик продукта), поэтому приоритеты заданы как гипотезы для валидации через аналитику и UX-тесты.

## Executive summary

- Главный UX-поток уже хорошо сфокусирован: `Splash → Join → Compass → Settings`, а радар сделан главным экраном без лишних отвлечений.
- Визуальная система неполная: типографика не задана (`Typography()` по умолчанию), что повышает риск «плавающих» размеров текста и слабой иерархии.
- Основной экран перегружен скрытыми жестами (tap/long-press/pinch), при этом onboarding-подсказок в самом UI недостаточно.
- На `JoinScreen` есть когнитивная перегрузка из-за смешения «создать команду» и «войти по коду» в одном блоке без явного step-by-step.
- Тексты местами смешивают русский/английский и не унифицированы по тону (например, в Settings/Diagnostics), что снижает целостность опыта.
- В коде есть loading/error-состояния, но нет системного паттерна empty/error/success с предсказуемыми CTA на каждом экране.
- Визуальная палитра «olive/sand» соответствует тематике продукта, но нужны формальные токены контрастности и состояния компонентов (default/pressed/disabled/error).
- Для роста task success за 30–60 секунд приоритет №1: сократить время до «первого полезного действия» на Join и сделать явными ключевые действия на Compass.
- Для роста retention приоритет №2: стандартизировать microcopy, подсказки и статусы трекинга (что происходит сейчас + что делать пользователю).
- Для снижения UX-рисков приоритет №3: accessibility baseline (touch target 48dp, контраст, TalkBack-лейблы, dynamic type).

## Таблица рекомендаций (Экран → Проблема → Рекомендация → Приоритет → Эффект)

| Экран | Проблема | Рекомендация (измеримо) | Приоритет (Impact/Effort) | Ожидаемый эффект |
|---|---|---|---|---|
| Splash | 650ms задержка фиксирована, не связана с полезной готовностью | Сделать адаптивную задержку 250–500ms и переход сразу при `isAuthReady=true`; A/B по Time-to-Interactive | High / S | -10–20% время входа в сценарий |
| Join | Один большой блок объединяет «создать» и «войти», когнитивно тяжело | Разделить на 2 явные CTA-карточки: «Создать команду» и «Войти по коду», с подсказкой «1 шаг из 2» | High / M | +5–12% completion входа |
| Join | Нет инлайн-валидации кода/позывного | Добавить правила и inline errors: длина, допустимые символы, понятный текст ошибки | High / S | -20% неуспешных попыток входа |
| Join | Нет явного прогресса при `isBusy` кроме disable | Добавить blocking state с прогрессом и текстом «Подключаем к команде…» + timeout CTA «Повторить» | Medium / S | -15% дропов на ожидании |
| Compass | Скрытые жесты (tap/long-press/pinch) неочевидны | Добавить bottom sheet «Как пользоваться радаром» (первый запуск + из меню) с 3 короткими иллюстрированными шагами | High / M | +10–18% успешного выполнения задач |
| Compass | Перегрузка вторичными действиями в хедере/оверлеях | Вынести вторичные actions в FAB speed-dial или bottom action bar, оставить 1 primary CTA | High / M | -10–15% времени поиска действия |
| Compass | Нет явной легенды маркеров/иконок | Добавить легенду (sheet) + единый словарь иконок (друг/точка/угроза/цель) | Medium / S | -25% ошибок интерпретации |
| Compass | Статусы сети/RTDB не объясняют «что делать» | Для error-state добавить CTA: «Повторить», «Открыть настройки сети», «Скопировать код диагностики» | High / M | +NPS, -время до восстановления |
| Settings | Смешение RU/EN в диагностике | Полная локализация и единый тон microcopy; формат «Ошибки чтения/записи» | Medium / S | +воспринимаемое качество интерфейса |
| Settings | Слайдеры без явных границ риска батареи | Добавить подписи min/max и helper text: «чаще = точнее, но расход выше» + индикатор расхода | Medium / S | +осознанность настройки, -support-вопросы |
| Global | Typography не определена как система | Ввести шрифтовую шкалу (Display/Headline/Title/Body/Label) и закрепить роли для экранов | High / S | +читаемость, +консистентность |
| Global | Нет формализованных spacing-токенов | Ввести 8dp сетку и отступы (4/8/12/16/24/32), запрет «случайных» значений без токена | High / S | -визуальный шум, +скорость разработки |
| Global | Не описаны состояния компонентов | Для Button/Card/TextField задать состояния: default/hover(если нужно)/pressed/disabled/error/success | Medium / M | +предсказуемость UI |
| Global | Accessibility baseline не зафиксирован | Ввести DoD: touch target ≥48dp, контраст WCAG AA, скринридер labels, scaling 200% | High / M | +доступность, +compliance |

## Roadmap внедрения

### Quick wins (1–3 дня)

1. **Стандартизировать микрокопи и язык интерфейса (RU-only или мультиязычность по правилам).**
   - Почему: сейчас смешение языков и тонов снижает качество UX.
   - KPI: task success, CSAT/NPS.
   - Сложность: **S**.
   - Риски/зависимости: потребуются string resources и ревью копирайта.

2. **Добавить inline-валидацию на Join (позывной/код).**
   - Почему: предотвращает ошибки до отправки.
   - KPI: conversion в join/create.
   - Сложность: **S**.
   - Риски: согласование правил формата с backend.

3. **Унифицировать loading/error empty-state шаблон.**
   - Почему: уменьшает тупики и неопределённость.
   - KPI: drop-off на экранах, time-to-recover.
   - Сложность: **S**.
   - Риски: минимальные.

4. **Ввести типографическую шкалу Material 3 в `Typography`.**
   - Почему: усиление иерархии и читаемости.
   - KPI: субъективная понятность, скорость сканирования.
   - Сложность: **S**.
   - Риски: локальные визуальные регрессии.

### Средние (1–2 недели)

1. **Редизайн Join в формат «2 шага»: профиль → действие (создать/войти).**
   - Почему: снижение когнитивной нагрузки.
   - KPI: completion первого сценария за 60 сек.
   - Сложность: **M**.
   - Риски: нужно обновить аналитику событий.

2. **Onboarding-подсказки для Compass (жесты + легенда).**
   - Почему: ключевые функции скрыты в жестах.
   - KPI: onboarding completion, number of successful actions.
   - Сложность: **M**.
   - Риски: не перегрузить первый опыт.

3. **Стандартизировать компонентные состояния (buttons/cards/fields).**
   - Почему: консистентность и предсказуемость.
   - KPI: скорость разработки/ревью, снижение UX-ошибок.
   - Сложность: **M**.
   - Риски: потребует рефакторинга UI-слоя.

4. **Accessibility pass (TalkBack + dynamic type + контраст).**
   - Почему: увеличение охвата и устойчивость UX.
   - KPI: accessibility defects, QA pass rate.
   - Сложность: **M**.
   - Риски: доработка контента и semantics.

### Большие (3–6 недель)

1. **Рефактор навигации и IA вокруг ключевого сценария «обнаружил → отметил → передал команде».**
   - Почему: ускорение главного use case.
   - KPI: time-to-complete mission task, retention D7.
   - Сложность: **L**.
   - Риски: затрагивает ViewModel/events.

2. **Полноценная мини дизайн-система с токенами и UI-kit в Compose.**
   - Почему: масштабируемость и меньше регрессий.
   - KPI: скорость feature delivery, UI bug rate.
   - Сложность: **L**.
   - Риски: нужно поэтапное внедрение.

3. **Сценарный UX с role-based режимами (лидер/участник).**
   - Почему: разные роли требуют разных приоритетов UI.
   - KPI: эффективность командных действий.
   - Сложность: **L**.
   - Риски: продуктовые решения + backend ограничения.

## Мини дизайн-система (практические правила)

### 1) Типографика

- Использовать Material 3 scale с фиксированными ролями:
  - `titleLarge` — названия экранов.
  - `titleMedium` — заголовки карточек.
  - `bodyMedium` — основной текст.
  - `bodySmall` — пояснения.
  - `labelLarge` — кнопки.
- Минимальный размер текста для ключевой информации: **14sp**.
- Межстрочный интервал: 120–140% от размера шрифта.
- Нельзя использовать более 3 уровней веса на одном экране.

### 2) Цвета

- Закрепить semantic tokens:
  - `colorSuccess`, `colorWarning`, `colorError`, `colorInfo`.
- Контраст текста к фону: минимум **WCAG AA (4.5:1)** для body text.
- Для disabled-состояний — отдельные токены, а не прозрачность «на глаз».
- Поддерживать parity для dark/light режимов (одинаковая семантика).

### 3) Сетка и отступы

- Базовый шаг: **8dp**.
- Разрешённые отступы: `4/8/12/16/24/32`.
- Внутренние паддинги карточек: **16dp**.
- Между крупными секциями экрана: **24dp**.

### 4) Компоненты

- Кнопки:
  - Primary — одно действие на экран/блок.
  - Secondary — до 2 рядом с primary.
  - Touch target **>=48dp**.
- TextField:
  - Label + helper/error text обязательны.
  - Ошибки в inline-формате до submit.
- Card:
  - Не смешивать более 2 визуальных акцентов в одной карточке.

### 5) Состояния и motion

- Для каждого экрана обязателен набор: `loading / empty / error / success`.
- Анимации только функциональные:
  - micro transitions: 150–250ms,
  - навигационные: 250–350ms.
- Избегать «вечных» индикаторов без CTA на восстановление.

## 16 конкретных визуальных правок (формулировки для разработчика)

1. `JoinScreen`: «Раздели блок входа на две отдельные карточки: `Создать команду` и `Войти по коду` с отдельными кнопками primary».
2. `JoinScreen`: «Добавь helper text под полем позывного: `3–16 символов, латиница/цифры`».
3. `JoinScreen`: «При invalid code показывай inline error `Проверь код команды` до нажатия кнопки входа».
4. `JoinScreen`: «Во время `isBusy` показывай полноэкранный scrim + `CircularProgressIndicator` и текст состояния».
5. `CompassScreen`: «Добавь кнопку `?` с bottom-sheet инструкцией по жестам (tap/long-press/pinch)».
6. `CompassScreen`: «Добавь legend-sheet со значениями иконок и цветов отметок».
7. `CompassScreen`: «Сделай один primary CTA для текущего режима (например, `Отметить противника`) и убери конкурирующие акценты».
8. `CompassScreen`: «В error-snackbar добавь action `Повторить` и понятный текст причины».
9. `SettingsScreen`: «Переведи diagnostics на единый язык и формат: `Ошибки чтения: X`, `Ошибки записи: Y`».
10. `SettingsScreen`: «Под слайдерами добавь подпись диапазона: `1–15 сек`, `5–50 м` и влияние на батарею».
11. Global: «Создай `Typography` с явными размерами для title/body/label вместо `Typography()` default».
12. Global: «Введи spacing constants (`Space4..Space32`) и замени прямые `dp` где это возможно».
13. Global: «Для всех IconButton добавь корректные `contentDescription` (не `null`), если действие важно».
14. Global: «Проверь все tappable элементы на минимальный размер 48dp».
15. Global: «Добавь semantics labels для ключевых радарных элементов, чтобы TalkBack озвучивал контекст».
16. Global: «Собери единый стиль error/success сообщений: заголовок + причина + следующее действие».

## Предложение по обновлению навигации и ключевых сценариев

### Сценарий A: «Первый вход за 30–60 секунд»

1. Splash (макс 500ms после готовности).
2. Join Step 1: ввести позывной.
3. Join Step 2: выбрать действие — создать или войти по коду.
4. Автопереход в Compass + одноразовая подсказка по жестам.

**Оптимизация:** убрать лишние объяснения до момента первого полезного действия.

### Сценарий B: «Обнаружить и отметить цель»

1. На Compass явный primary CTA «Отметить противника».
2. Tap по радару → подтверждение маркера (тип + подпись).
3. Toast/snackbar «Отметка отправлена команде».
4. Быстрый переход к легенде/фильтрам при необходимости.

**Оптимизация:** минимизировать неопределённость после тапа (что произошло?).

### Сценарий C: «Смена режима трекинга»

1. В хедере — текущий режим и короткий статус.
2. Тап → bottom sheet с 2 режимами и ожидаемым эффектом.
3. Применение с подтверждением «Режим Игра активен».

**Оптимизация:** объяснить влияние на точность/батарею прямо в момент выбора.

## QA-чеклист после правок (визуал + UX)

### Визуал

- [ ] Все экраны используют типографику из токенов, нет случайных размеров.
- [ ] Отступы соответствуют сетке 8dp.
- [ ] Primary action визуально один на экран/блок.
- [ ] Цвета состояния (success/warning/error) консистентны.

### UX

- [ ] Первый вход (новый пользователь) выполняется <60 секунд без подсказки от тестировщика.
- [ ] Все ошибки содержат `что случилось` + `что сделать дальше`.
- [ ] Нет тупиков: с каждого экрана есть понятное продолжение действия.
- [ ] На Compass пользователь понимает жесты без чтения документации.

### Accessibility

- [ ] Touch target всех интерактивных элементов >=48dp.
- [ ] Контраст текста и фона соответствует WCAG AA.
- [ ] TalkBack читает важные кнопки и статусы осмысленно.
- [ ] UI сохраняет читабельность при масштабировании шрифта до 200%.

### Regression

- [ ] Навигация `Splash → Join → Compass → Settings` без «черных экранов» и некорректного back behavior.
- [ ] Изменения UI не ломают трекинг, импорт карты, работу точек и диагностики.
- [ ] Snackbar/alerts не перекрывают критически важные контролы.
