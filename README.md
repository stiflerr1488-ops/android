# TeamCompass MVP Prototype

Этот коммит начинает реализацию приложения по `MVP_SPEC.md`.

## Что реализовано сейчас
- `core/` — доменные модели и логика MVP:
  - вычисления distance/bearing/relative angle;
  - политика staleness;
  - режимы трекинга (`Игра` / `Тихо`);
  - backoff для ретраев;
  - in-memory репозитории матча/состояний;
  - use-case классы (`StartMatch`, `JoinMatch`, `StartTracking`, `StopTracking`).
- `app/` — минимальный JVM entrypoint (`main`) для демонстрации расчёта целей.

## Почему без полноценного Android UI в этом шаге
В текущем окружении не разрешаются Gradle plugin-артефакты (Kotlin/Android plugins),
поэтому сборка Android-модуля блокируется на уровне toolchain.
Логика вынесена в независимый модуль `core`, чтобы продолжить реализацию
и покрыть правила MVP тестами.

## Следующий шаг
При рабочем доступе к Android Gradle plugins:
1. перевести `app` обратно на Android + Compose;
2. подключить Firebase Auth/RTDB;
3. добавить Foreground Service для location tracking;
4. связать UI экранов Lobby/Compass/List с use-case и Flow-состоянием.

## Комментарии по текущему MVP
- Сейчас трекинг работает только пока приложение открыто.
  Следующий этап — вынести трекинг в foreground service,
  чтобы он продолжал работать и с погашенным экраном.
- Если телефон стоит на месте и у устройства плохой компас
  (или нет подходящего датчика), стрелки могут быть менее точными.
  Во время движения направление стабилизируется,
  потому что начинает использоваться курс по GPS.
- 6-значный код входа удобен, но теоретически подвержен брутфорсу.
  Для закрытой команды это обычно приемлемо на этапе MVP.
  При необходимости более строгой защиты можно добавить валидацию
  кода через Cloud Function (например, с lock/TTL и ограничениями попыток).
